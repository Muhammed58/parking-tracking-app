{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect } from 'react';\nimport 'react-native-gesture-handler';\nimport { useFonts } from 'expo-font';\nimport Settings from \"./subScreens/Settings.js\";\nimport MainPageBackImage from \"./subScreens/MainPageBackImage.js\";\nimport { ErrorPage } from \"./subScreens/ErrorPage.js\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { getLastLocation, getLocationList, getProfile } from \"../api.js\";\nimport * as SecureStore from 'expo-secure-store';\nimport { LOGIN_KEY } from '@env';\nimport SplashScreen from \"./subScreens/SplashScreen.js\";\nimport Rakkas from \"../assets/fonts/fonts.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\n\nvar parkingHistory = require(\"../assets/images/parkingHistory.png\");\n\nvar currentParking = require(\"../assets/images/currentParking.png\");\n\nvar parkHere = require(\"../assets/images/parkHereIcon.png\");\n\nexport default function MainPage(_ref) {\n  var route = _ref.route,\n      navigation = _ref.navigation;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      lastLocation = _useState2[0],\n      setLastLocation = _useState2[1];\n\n  useEffect(function () {\n    getLastLocation().then(function (res) {\n      setLastLocation(res.data.location);\n    }).catch(function (err) {\n      console.log(err);\n      setLastLocation(err);\n    });\n  }, [route.params]);\n\n  var _useState3 = useState({}),\n      _useState4 = _slicedToArray(_useState3, 2),\n      locationList = _useState4[0],\n      setLocationList = _useState4[1];\n\n  useEffect(function () {\n    getLocationList().then(function (res) {\n      setLocationList(res.data);\n    }).catch(function (err) {\n      return console.log(err);\n    });\n  }, [route.params]);\n\n  var _useState5 = useState({}),\n      _useState6 = _slicedToArray(_useState5, 2),\n      profileInfo = _useState6[0],\n      setProfileInfo = _useState6[1];\n\n  useEffect(function () {\n    getUserProfile = function getUserProfile() {\n      return _regeneratorRuntime.async(function getUserProfile$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(SecureStore.getItemAsync(LOGIN_KEY));\n\n            case 2:\n              userToken = _context.sent;\n\n              if (!(userToken !== null)) {\n                _context.next = 6;\n                break;\n              }\n\n              _context.next = 6;\n              return _regeneratorRuntime.awrap(getProfile(userToken).then(function (res) {\n                setProfileInfo(res.data);\n              }).catch(function (err) {\n                return console.log(\"getUserProfileErr\", err);\n              }));\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }, getUserProfile();\n  }, [route.params]);\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      isLoaded = _useState8[0],\n      setIsLoaded = _useState8[1];\n\n  var handleCurrentParking = function handleCurrentParking() {\n    navigation.navigate('CurrentParking', {\n      latitude: lastLocation[0],\n      longitude: lastLocation[1]\n    });\n  };\n\n  var handleParkingHistory = function handleParkingHistory() {\n    navigation.navigate('ParkingHistory', {\n      latitude: lastLocation[0],\n      longitude: lastLocation[1],\n      locationList: locationList\n    });\n  };\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      errorMessage = _useState10[0],\n      setErrorMessage = _useState10[1];\n\n  var _useFonts = useFonts({\n    Rakkas: Rakkas\n  }),\n      _useFonts2 = _slicedToArray(_useFonts, 1),\n      loaded = _useFonts2[0];\n\n  if (!loaded) {\n    _jsx(SplashScreen, {});\n  }\n\n  return _jsx(_Fragment, {\n    children: isLoaded ? _jsx(SplashScreen, {}) : _jsxs(View, {\n      style: styles.mainContainer,\n      children: [_jsx(MainPageBackImage, {}), _jsxs(Pressable, {\n        activeOpacity: 0.6,\n        style: function style(_ref2) {\n          var pressed = _ref2.pressed;\n          return [{\n            shadowColor: \"black\",\n            shadowRadius: 2,\n            shadowOpacity: pressed ? 0.1 : 0.9,\n            shadowOffset: pressed ? {\n              width: 0,\n              height: 1\n            } : {\n              width: 0,\n              height: 3\n            },\n            transform: [pressed ? {\n              translateY: 10\n            } : {\n              translateY: 0\n            }]\n          }, styles.parkingHistoryContainer];\n        },\n        onPress: handleParkingHistory,\n        children: [_jsx(Image, {\n          source: parkingHistory,\n          style: styles.parkingHistoryImage\n        }), _jsx(View, {\n          style: styles.historyTextContainer,\n          children: _jsx(Text, {\n            style: styles.parkingHistoryText,\n            children: \"Parking History\"\n          })\n        })]\n      }), _jsxs(Pressable, {\n        activeOpacity: 0.6,\n        style: function style(_ref3) {\n          var pressed = _ref3.pressed;\n          return [{\n            shadowColor: \"black\",\n            shadowRadius: 2,\n            shadowOpacity: pressed ? 0.1 : 0.9,\n            shadowOffset: pressed ? {\n              width: 0,\n              height: 1\n            } : {\n              width: 0,\n              height: 3\n            },\n            transform: [pressed ? {\n              translateY: 10\n            } : {\n              translateY: 0\n            }]\n          }, styles.currentParkingContainer];\n        },\n        onPress: handleCurrentParking,\n        children: [_jsx(Image, {\n          source: currentParking,\n          style: styles.currentParkingImage\n        }), _jsx(View, {\n          style: styles.currentTextContainer,\n          children: _jsx(Text, {\n            style: styles.currentParkingText,\n            children: \"Current Parking\"\n          })\n        })]\n      }), _jsxs(Pressable, {\n        activeOpacity: 0.6,\n        onPress: function onPress() {\n          navigation.navigate('ParkHere');\n        },\n        style: function style(_ref4) {\n          var pressed = _ref4.pressed;\n          return [{\n            shadowColor: \"black\",\n            shadowRadius: 2,\n            shadowOpacity: pressed ? 0.1 : 0.9,\n            shadowOffset: pressed ? {\n              width: 0,\n              height: 1\n            } : {\n              width: 0,\n              height: 3\n            },\n            transform: [pressed ? {\n              translateY: 10\n            } : {\n              translateY: 0\n            }]\n          }, styles.parkHereContainer];\n        },\n        children: [_jsx(Image, {\n          source: parkHere,\n          style: styles.parkHereImage\n        }), _jsx(View, {\n          style: styles.parkHereTextContainer,\n          children: _jsx(Text, {\n            style: styles.parkHereText,\n            children: \"Park Here!\"\n          })\n        })]\n      }), _jsx(Settings, {\n        profile: profileInfo,\n        locationList: locationList\n      }), errorMessage && _jsx(ErrorPage, {\n        errorMessage: \"error Message\"\n      })]\n    })\n  });\n}\nvar width = Dimensions.get('window').width;\nvar height = Dimensions.get('window').height;\nvar styles = StyleSheet.create({\n  mainContainer: {\n    position: \"relative\",\n    width: \"100%\",\n    height: \"100%\",\n    paddingTop: height * 0.23,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    backgroundColor: \"#FFCC56\"\n  },\n  parkingHistoryContainer: {\n    position: \"relative\",\n    width: width * 0.5,\n    height: height * 0.15,\n    borderTopEndRadius: 500,\n    alignItems: \"center\",\n    borderWidth: 0,\n    justifyContent: \"center\",\n    top: height * -0.66,\n    left: width * 0.17\n  },\n  parkingHistoryImage: {\n    position: \"absolute\",\n    width: width * 0.32,\n    height: height * 0.10,\n    top: height * 0.01\n  },\n  historyTextContainer: {\n    position: \"absolute\",\n    top: height * 0.12,\n    borderWidth: 3,\n    borderRadius: 10,\n    backgroundColor: \"#FFCC56\",\n    padding: 3\n  },\n  parkingHistoryText: {\n    fontFamily: \"Rakkas\",\n    fontSize: width * 0.06\n  },\n  currentParkingContainer: {\n    position: \"relative\",\n    width: width * 0.6,\n    height: height * 0.2,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    top: height * -0.58,\n    left: width * -0.22\n  },\n  currentParkingImage: {\n    position: \"absolute\",\n    width: width * 0.55,\n    height: height * 0.20,\n    top: height * -0.03\n  },\n  currentTextContainer: {\n    position: \"absolute\",\n    top: height * 0.18,\n    borderWidth: 3,\n    borderRadius: 10,\n    backgroundColor: \"#FFCC56\",\n    padding: 3\n  },\n  currentParkingText: {\n    fontSize: width * 0.06,\n    fontFamily: \"Rakkas\"\n  },\n  parkHereContainer: {\n    position: \"relative\",\n    width: width * 0.6,\n    height: height * 0.2,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    top: height * -0.47,\n    left: width * 0.05\n  },\n  parkHereImage: {\n    position: \"absolute\",\n    width: width * 0.7,\n    height: height * 0.23,\n    top: height * -0.06\n  },\n  parkHereTextContainer: {\n    position: \"absolute\",\n    top: height * 0.16,\n    borderWidth: 3,\n    borderRadius: 10,\n    backgroundColor: \"#FFCC56\",\n    padding: 3\n  },\n  parkHereText: {\n    fontFamily: \"Rakkas\",\n    fontSize: width * 0.06\n  }\n});","map":{"version":3,"sources":["/Users/muhammetarslantas/Desktop/Muhammet/Projects/ParkingApp/client/screens/MainPage.js"],"names":["React","useState","useEffect","useFonts","Settings","MainPageBackImage","ErrorPage","getLastLocation","getLocationList","getProfile","SecureStore","LOGIN_KEY","SplashScreen","Rakkas","parkingHistory","require","currentParking","parkHere","MainPage","route","navigation","lastLocation","setLastLocation","then","res","data","location","catch","err","console","log","params","locationList","setLocationList","profileInfo","setProfileInfo","getUserProfile","getItemAsync","userToken","isLoaded","setIsLoaded","handleCurrentParking","navigate","latitude","longitude","handleParkingHistory","errorMessage","setErrorMessage","loaded","styles","mainContainer","pressed","shadowColor","shadowRadius","shadowOpacity","shadowOffset","width","height","transform","translateY","parkingHistoryContainer","parkingHistoryImage","historyTextContainer","parkingHistoryText","currentParkingContainer","currentParkingImage","currentTextContainer","currentParkingText","parkHereContainer","parkHereImage","parkHereTextContainer","parkHereText","Dimensions","get","StyleSheet","create","position","paddingTop","alignItems","justifyContent","backgroundColor","borderTopEndRadius","borderWidth","top","left","borderRadius","padding","fontFamily","fontSize"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport 'react-native-gesture-handler';\nimport { useFonts } from 'expo-font'\nimport Settings from './subScreens/Settings.js'\nimport MainPageBackImage from './subScreens/MainPageBackImage.js';\nimport { ErrorPage } from './subScreens/ErrorPage.js';\nimport { View, Text, Image, StyleSheet, Dimensions,\n        Pressable, ActivityIndicator } from 'react-native';\n\n\n\nimport {getLastLocation, getLocationList, getProfile} from '../api.js'\nimport * as SecureStore from 'expo-secure-store';\nimport { LOGIN_KEY } from '@env'\nimport SplashScreen from './subScreens/SplashScreen.js';\nimport Rakkas from '../assets/fonts/fonts.js'\n\n// define images\nconst parkingHistory = require('../assets/images/parkingHistory.png');\nconst currentParking = require('../assets/images/currentParking.png')\nconst parkHere = require('../assets/images/parkHereIcon.png')\n\n\nexport default function MainPage ({route, navigation}) {\n\n    // SET LAST LOCATION DATA\n    const [lastLocation, setLastLocation] = useState( [] )\n    useEffect(() => {\n            getLastLocation()            \n            .then((res) => {setLastLocation(res.data.location);})\n            .catch(err=> {console.log(err); setLastLocation(err)})\n        }, [route.params])\n\n    // GET LIST OF LOCATIONS \n    const [locationList, setLocationList] = useState({})\n    useEffect(() => {\n         getLocationList()            \n        .then((res) => { setLocationList(res.data) })\n        .catch(err=> console.log(err))\n        }, [route.params])\n\n    //GET PROFILE INFORMATION\n    const [profileInfo, setProfileInfo] = useState({})\n    useEffect(() => {\n        getUserProfile= async () => {\n            userToken = await SecureStore.getItemAsync(LOGIN_KEY); \n            if(userToken !== null){\n              await getProfile(userToken)\n              .then(res=> {\n                setProfileInfo(res.data)\n              })\n              .catch(err=> console.log(\"getUserProfileErr\", err))\n            }\n        },\n        getUserProfile()\n    }, [route.params])\n    \n    //Loading page\n    const [isLoaded, setIsLoaded] = useState(false)\n\n    const handleCurrentParking = () =>{\n        navigation.navigate('CurrentParking',{\n            latitude: lastLocation[0],\n            longitude: lastLocation[1]\n        })\n    }\n    const handleParkingHistory = () =>{\n        navigation.navigate('ParkingHistory',{\n            latitude: lastLocation[0],\n            longitude: lastLocation[1],\n            locationList: locationList\n        })\n    }\n\n    //HANDLE ERROR MESSAGES\n    const [errorMessage, setErrorMessage] = useState(false)\n     \n    //FONTS DEFINE\n    const[loaded] = useFonts({\n        Rakkas: Rakkas\n    })\n    \n    if (!loaded) {\n       <SplashScreen/>\n    } \n    \n    return(\n        <>\n        {isLoaded ? ( <SplashScreen/>\n        \n        ) : (\n        \n        <View style={styles.mainContainer}>\n            <MainPageBackImage/>\n         \n            <Pressable activeOpacity={0.6}   style={\n                ({pressed}) =>[\n                    { shadowColor:\"black\", \n                    shadowRadius:2,\n                    shadowOpacity: pressed ? 0.1 : 0.9,\n                    shadowOffset: pressed ? {width:0, height:1} : {width:0, height:3},\n                    transform:[pressed ? {translateY: 10}:{ translateY:0}],\n                },\n                styles.parkingHistoryContainer]}\n                onPress={handleParkingHistory}>\n                <Image source={parkingHistory} style={styles.parkingHistoryImage}/>\n                <View style={styles.historyTextContainer}>\n                    <Text style={styles.parkingHistoryText}>Parking History</Text>\n                </View>\n            </Pressable>\n            <Pressable activeOpacity={0.6}  style={\n                ({pressed}) =>[\n                    { shadowColor:\"black\", \n                    shadowRadius:2,\n                    shadowOpacity: pressed? 0.1: 0.9,\n                    shadowOffset: pressed ? {width:0, height:1} : {width:0, height:3},\n                    transform:[pressed ? {translateY: 10}:{ translateY:0}]\n                },styles.currentParkingContainer]}\n                    onPress={handleCurrentParking}>\n\n                <Image source={currentParking} style={styles.currentParkingImage}/>\n                <View style={styles.currentTextContainer}>\n                    <Text style={styles.currentParkingText}>Current Parking</Text>\n                </View>\n                \n            </Pressable>\n       \n            <Pressable activeOpacity={0.6} onPress={()=>{\n                navigation.navigate('ParkHere')\n            }} style={\n                ({pressed}) =>[\n                    { shadowColor:\"black\", \n                    shadowRadius:2,\n                    shadowOpacity: pressed? 0.1: 0.9,\n                    shadowOffset: pressed ? {width:0, height:1} : {width:0, height:3},\n                    transform:[pressed ? {translateY: 10}:{ translateY:0}]\n                },\n                styles.parkHereContainer]}>\n                <Image source={parkHere} style={styles.parkHereImage}/>\n                <View style={styles.parkHereTextContainer}>\n                    <Text style={styles.parkHereText}>Park Here!</Text>\n                </View>\n            </Pressable>\n            <Settings profile={profileInfo} locationList={locationList}/>\n\n            { errorMessage && <ErrorPage errorMessage={\"error Message\"}/>}\n        </View>\n     )}\n     </>\n    )\n    \n}\n\n//Get screen height and width for responsive\nconst width = Dimensions.get('window').width;\nconst height = Dimensions.get('window').height;\n\nconst styles = StyleSheet.create({\n    mainContainer:{\n        position:\"relative\",\n        width:\"100%\",\n        height:\"100%\",\n        paddingTop: height * 0.23,\n        alignItems:\"center\",\n        justifyContent:\"center\",\n        backgroundColor:\"#FFCC56\",\n    },\n\n    parkingHistoryContainer:{\n        position:\"relative\",\n        width: width * 0.5,\n        height: height * 0.15,\n        borderTopEndRadius:500,\n        alignItems:\"center\",\n        borderWidth:0,\n        justifyContent:\"center\",\n        top: height * -0.66,\n        left: width * 0.17,\n    },\n\n    parkingHistoryImage:{\n        position:\"absolute\",\n        width: width * 0.32,\n        height: height * 0.10,\n        top: height * 0.01,\n    },\n\n    historyTextContainer:{\n        position:\"absolute\",\n        top: height * 0.12,\n        borderWidth:3,\n        borderRadius:10,\n        backgroundColor:\"#FFCC56\",\n        padding:3,\n    },\n\n    parkingHistoryText:{\n        fontFamily:\"Rakkas\",\n        fontSize: width * 0.06,\n    },\n\n    currentParkingContainer:{\n        position:\"relative\",\n        width: width * 0.6,\n        height: height * 0.2,\n        alignItems:\"center\",\n        justifyContent:\"center\",\n        top: height * -0.58,\n        left: width * -0.22,\n    },\n\n    currentParkingImage:{\n        position:\"absolute\",\n        width: width * 0.55,\n        height: height * 0.20,\n        top: height * -0.03,\n    },\n\n    currentTextContainer:{\n        position:\"absolute\",\n        top: height * 0.18,\n        borderWidth:3,\n        borderRadius:10,\n        backgroundColor:\"#FFCC56\",\n        padding:3,    \n    },\n\n    currentParkingText:{\n        fontSize: width * 0.06,\n        fontFamily:\"Rakkas\",\n    },\n\n    parkHereContainer:{\n        position:\"relative\",\n        width: width * 0.6,\n        height: height * 0.2,\n        alignItems:\"center\",\n        justifyContent:\"center\",\n        top: height * -0.47,\n        left: width * 0.05,\n    },\n\n    parkHereImage:{\n        position:\"absolute\",\n        width: width * 0.7,\n        height: height * 0.23,\n        top: height * -0.06,\n    },\n\n    parkHereTextContainer:{\n        position:\"absolute\",\n        top: height * 0.16,\n        borderWidth:3,\n        borderRadius:10,\n        backgroundColor:\"#FFCC56\",\n        padding:3,\n    },\n\n    parkHereText:{\n        fontFamily:\"Rakkas\",\n        fontSize: width * 0.06,\n        \n    },\n})"]},"metadata":{},"sourceType":"module"}